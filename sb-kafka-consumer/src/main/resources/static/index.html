<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Painel Kafka - Pagamentos</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
    <style>
        body { font-family: Arial; background: #f7f7f7; margin: 30px; }
        h1 { color: #2a2a2a; }
        #mensagens { background: #fff; border-radius: 10px; padding: 15px; box-shadow: 0 0 10px #ccc; max-width: 600px; }
        .msg { border-bottom: 1px solid #ddd; padding: 8px; }
    </style>
</head>
<body>
<h1>Painel de Pagamentos (Kafka)</h1>
<div id="mensagens"></div>

<script>
    const socket = new SockJS('/ws');
    const stompClient = Stomp.over(socket);
    stompClient.connect({}, () => {
        stompClient.subscribe('/topic/messages', (msg) => {
            const data = msg.body;
            const div = document.createElement('div');
            div.className = 'msg';
            div.textContent = data;
            document.getElementById('mensagens').prepend(div);
        });
    });
</script>
</body>
</html>